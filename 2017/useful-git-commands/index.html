<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Useful git commmands</title>
<link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha256-3dkvEK0WLHRJ7/Csr0BZjAWxERc5WH7bdeUya2aXxdU= sha512-+L4yy6FRcDGbXJ9mPG8MT/3UCDzwR9gPeyFNMCtInsol++5m3bk2bXWKdZjvybmohrAsn3Ua5x8gfLnbE1YkOg==" crossorigin="anonymous">
<link rel="stylesheet" href="//writ.cmcenroe.me/1.0.2/writ.min.css">
<link rel="stylesheet" href="/style.css" type="text/css" media="all" />
<link rel="alternate" href="/rss.xml" type="application/rss+xml" title="RSS" />
<meta name="author" content="Mark Sta Ana">
<meta name="description" content="Personal website of Mark Sta Ana, aged 7 3/4."/>
<meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" /> 

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-101141559-1', 'auto');
  ga('send', 'pageview');

</script>

  </head>
<body data-route=blog>
  <nav class="menu">
  <a class="menu-item " href="/about/">booyaa</a>
  <a class="menu-item current" href="/">blog</a>
  <a class="menu-item " href="/talks">talks</a>
  <a class="menu-item" href="/search/">search</a>
  <a class="menu-item" href="/archive/">archive</a>
  <a class="menu-item icon" href="http://github.com/booyaa"><i class="fa fa-github"></i></a>
  <a class="menu-item icon" href="http://twitter.com/booyaa"><i class="fa fa-twitter"></i></a>
  <a class="menu-item icon" href="/rss.xml"><i class="fa fa-rss"></i></a>
  <hr>
</nav>

  <main>
    <article>
      <h1>Useful git commmands</h1>
       
      
      
      
          
				 

			<time pubdate="pubdate">Jun 22, 2017 - Reading time: about a minute.</time><br />
      
      <h2>Commit logs</h2>
<p>Now that I've started adding <a href="/2017/useful-commit-messages.md">useful commit messages</a>
it's really use to make sense of my commits, more so when you use single line 
mode.</p>
<pre style="background-color:#2b303b;">
<span style="background-color:#2b303b;color:#c0c5ce;">$ git log --oneline
3b04513 doc: add &#39;comment&#39; tag to explain purpose of new templates
86cc454 feat: add tags to search
7286f90 feat: add twitter share button
24cfc85 feat: add todo
20d28d7 chore: remove manually generated lunr index
...
</span></pre>
<h2>Started working on a feature/fix, but forgot you we're in master?</h2>
<p>This assumes you haven't committed your changes...</p>
<pre style="background-color:#2b303b;">
<span style="background-color:#2b303b;color:#c0c5ce;">git checkout -b new_branch
# add and commit your changes
git checkout master
# clean up any files you don&#39;t want to commit...
</span></pre>
<h2>Sync your repo with the upstream</h2>
<p>Setup a remote to the upstream.</p>
<pre style="background-color:#2b303b;">
<span style="background-color:#2b303b;color:#c0c5ce;">git remote add upstream &lt;path/to/upstream&gt; # e.g. https://github.com/cobalt-org/liquid-rust.git
</span></pre>
<p>Now sync!</p>
<pre style="background-color:#2b303b;">
<span style="background-color:#2b303b;color:#c0c5ce;">git fetch upstream  # gets branches and commits from upstream
git checkout master # switch to your forkâ€™s master branch (if you&#39;re not already there)
git merge upstream/master # sync
git push -u origin master # update remote repo of your fork
</span></pre>
<p>This can also be used to push your GitHub repos to other hosted SCM providers 
i.e. GitLab and BitBucket</p>
<h2>Submodules</h2>
<p>You want to add repo <code>Bar</code> to your own repo <code>Foo</code></p>
<p><code>git submodule add https://path/to/bar</code></p>
<p>To pull the changes in</p>
<p><code>git submodule init</code></p>
<p>To do this at clone time</p>
<p><code>git clone --recursive https://repo/contain/submodules</code></p>
<p>To refresh the submodule (assuming the dir name is the same as the submodule)</p>
<p><code>git submodule update --remote submodule_name</code></p>
<p>Possible gotcha if you refresh your submodule, you will need to commit new
version into your own repo.</p>
<h2>Tags</h2>
<p>N.B. Tags when push to GitHub become releases!</p>
<p>to tag</p>
<p><code>git tag v1.0.0</code></p>
<p>to see what tag we're on</p>
<p><code>git tag</code></p>
<p>to push</p>
<p><code>git push --tags</code></p>
<p>to pull</p>
<p><code>git fetch --tags</code></p>
<h2>Fixing &quot;fatal: refusing to merge unrelated histories&quot;</h2>
<p>Warning: this is destructive, if you've got local uncommitted changes do not 
proceed!</p>
<pre style="background-color:#2b303b;">
<span style="background-color:#2b303b;color:#c0c5ce;">$ git pull origin master
From github.com:booyaa/broken_repo
 * branch            master     -&gt; FETCH_HEAD
fatal: refusing to merge unrelated histories
$ git fetch # may be superflurous
$ git reset --hard origin/master
$ git branch --set-upstream-to=origin/master master
Branch master set up to track remote branch master from origin.
</span></pre>
<h2>Updating a branch with new changes from master</h2>
<pre style="background-color:#2b303b;">
<span style="background-color:#2b303b;color:#c0c5ce;">git checkout out_of_date_branch
git merge origin/master
git push origin out_of_date_branch
</span></pre>
    </article>
    <br /><br />
    <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </main>
  <footer>
  <hr>
  <p>
    <a href="/license/">CC BY-SA 4.0 / MIT</a>
    -
    <a href="https://github.com/cobalt-org/cobalt.rs">Built with Cobalt</a>
  </p>
  <br>
</footer>

</body>
</html>
