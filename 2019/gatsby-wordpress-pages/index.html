<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Gatsby and WordPress: Creating WordPress Page Types</title>
<link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha256-3dkvEK0WLHRJ7/Csr0BZjAWxERc5WH7bdeUya2aXxdU= sha512-+L4yy6FRcDGbXJ9mPG8MT/3UCDzwR9gPeyFNMCtInsol++5m3bk2bXWKdZjvybmohrAsn3Ua5x8gfLnbE1YkOg==" crossorigin="anonymous">
<link rel="stylesheet" href="//writ.cmcenroe.me/1.0.2/writ.min.css">
<link rel="stylesheet" href="/style.css" type="text/css" media="all" />
<link rel="alternate" href="/rss.xml" type="application/rss+xml" title="RSS" />
<meta name="author" content="Mark Sta Ana">
<meta name="description" content="Personal website of Mark Sta Ana, aged 7 3/4."/>
<meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" /> 

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-101141559-1', 'auto');
  ga('send', 'pageview');

</script>

  </head>
<body data-route=blog>
  <nav class="menu">
  <a class="menu-item " href="/about/">booyaa</a>
  <a class="menu-item current" href="/">blog</a>
  <a class="menu-item " href="/talks">talks</a>
  <a class="menu-item" href="/search/">search</a>
  <a class="menu-item" href="/archive/">archive</a>
  <a class="menu-item icon" href="http://github.com/booyaa"><i class="fa fa-github"></i></a>
  <a class="menu-item icon" href="http://twitter.com/booyaa"><i class="fa fa-twitter"></i></a>
  <a class="menu-item icon" href="/rss.xml"><i class="fa fa-rss"></i></a>
  <hr>
</nav>

  <main>
    <article>
      <h1>Gatsby and WordPress: Creating WordPress Page Types</h1>
       
      
      
      								
          
    	 

			<time pubdate="pubdate">Jan 04, 2019 - Reading time: 2 minutes.</time><br />
      
      <p>WordPress Pages are another <a href="https://codex.wordpress.org/Post_Types">Post Type</a>, they differ from Post Post(!) Types insofar that they aren’t time-related or be assigned categories and tags. Generally, they’re used for navigational items like About, Contact or Archive pages.</p>
<p>We’re going to update our <code>gatsby-node.js</code> to also pull in WordPress Pages so we can add an About link in our footer.</p>
<pre style="background-color:#2b303b;">
<span style="background-color:#2b303b;color:#c0c5ce;">  const createWpPages = new Promise((resolve, reject) =&gt; {
    const query = graphql(`
      {
        allWordpressPage {
          edges {
            node {
              id
              slug
            }
          }
        }
      }
    `)

    query.then(result =&gt; {
      if (result.errors) {
        console.error(result.errors)
        reject(result.errors)
      }

      const pageEdges = result.data.allWordpressPage.edges
      pageEdges.forEach(edge =&gt; {
        createPage({
          path: `/${edge.node.slug}`,
          component: path.resolve(`./src/templates/page.js`),
          context: {
            id: edge.node.id,
          },
        })
      })

      resolve()
    }) // query.then
  }) // createWpPages

  return Promise.all([createWpPosts, createWpPages])
} // createPages
</span></pre>
<p>It’s almost identical to our createWpPosts bar a few places such as query and template.</p>
<p>Here’s the page template <code>src/templates/pages.js</code></p>
<pre style="background-color:#2b303b;">
<span style="background-color:#2b303b;color:#c0c5ce;">import React from &#39;react&#39;
import { graphql } from &#39;gatsby&#39;
import Layout from &#39;../components/layout&#39;

export default ({ data }) =&gt; {
  const page = data.wordpressPage
  return (
    &lt;Layout&gt;
      &lt;div&gt;
        &lt;h1 dangerouslySetInnerHTML=&amp;#123;&amp;#123; __html: page.title &amp;#124;&amp;#124; /&gt;
        &lt;div dangerouslySetInnerHTML=&amp;#123;&amp;#123; __html: page.content &amp;#124;&amp;#124; /&gt;
      &lt;/div&gt;
    &lt;/Layoqut&gt;
  )
}

export const pageQuery = graphql`
  query($id: String!) {
    wordpressPage(id: { eq: $id }) {
      title
      content
    }
  }`
</span></pre>
<p>Finally, let’s update our footer (which lives in the Layout component <code>src/components/layout.js</code>)</p>
<pre style="background-color:#2b303b;">
<span style="background-color:#2b303b;color:#c0c5ce;">&lt;</span><span style="background-color:#2b303b;color:#bf616a;">footer</span><span style="background-color:#2b303b;color:#c0c5ce;">&gt;
© 2018, Built with &lt;</span><span style="background-color:#2b303b;color:#bf616a;">a </span><span style="background-color:#2b303b;color:#d08770;">href</span><span style="background-color:#2b303b;color:#c0c5ce;">=&quot;</span><span style="background-color:#2b303b;color:#a3be8c;">https://www.gatsbyjs.org</span><span style="background-color:#2b303b;color:#c0c5ce;">&quot;&gt;Gatsby&lt;/</span><span style="background-color:#2b303b;color:#bf616a;">a</span><span style="background-color:#2b303b;color:#c0c5ce;">&gt; | &lt;</span><span style="background-color:#2b303b;color:#bf616a;">a </span><span style="background-color:#2b303b;color:#d08770;">href</span><span style="background-color:#2b303b;color:#c0c5ce;">=&quot;</span><span style="background-color:#2b303b;color:#a3be8c;">/about</span><span style="background-color:#2b303b;color:#c0c5ce;">&quot;&gt;About Us&lt;/</span><span style="background-color:#2b303b;color:#bf616a;">a</span><span style="background-color:#2b303b;color:#c0c5ce;">&gt;
&lt;/</span><span style="background-color:#2b303b;color:#bf616a;">footer</span><span style="background-color:#2b303b;color:#c0c5ce;">&gt;
</span></pre>
<h2>Checkpoint: Let’s talk about us</h2>
<p>If we restart Gatsby, and we’ll see a new link in our site footer.</p>
<p><img src="/img/gxw-about-link.png" alt="About Link" /></p>
<p>Clicking on it takes us to our newly created WordPress Page!</p>
<p><img src="/img/gxw-about-page.png" alt="About Page" /></p>
<p>If you got stuck, you can check out the following Git hash: <a href="https://github.com/booyaa/wordsby/commit/ce6cc022a881e813af31279ff857f908ecc599f4"><code>ce6cc022a881e813af31279ff857f908ecc599f4</code></a></p>
<p><strong>The Gatsby x WordPress Blog Post series</strong></p>
<ul>
<li><a href="/2019/gatsby-wordpress-keeping-it-cheap-and-staying-in-touch">Keeping it cheap and staying in touch</a></li>
<li><a href="/2019/gatsby-wordpress-setup">Setup</a></li>
<li><a href="/2019/gatsby-wordpress-creating-content">Creating Content</a></li>
<li><a href="/2019/gatsby-wordpress-index-page">Creating an index page</a></li>
<li><em>Creating WordPress Page Types</em></li>
<li><a href="/2019/gatsby-wordpress-netlify">Netlify or Die!</a></li>
<li><a href="/2019/gatsby-wordpress-cutlasses-and-webhooks">Yarr! Cutlasses and Webhooks!</a></li>
<li><a href="/2019/gatsby-wordpress-summary">Summary</a></li>
</ul>

    </article>
    <br /><br />
    <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </main>
  <footer>
  <hr>
  <p>
    <a href="/license/">CC BY-SA 4.0 / MIT</a>
    -
    <a href="https://github.com/cobalt-org/cobalt.rs">Built with Cobalt</a>
  </p>
  <br>
</footer>

</body>
</html>
